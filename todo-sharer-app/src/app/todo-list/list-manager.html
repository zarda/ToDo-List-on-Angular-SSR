<div class="list-manager-container">
  <!-- List Selection Dropdown -->
  @if (store.lists().length > 0) {
    <mat-form-field appearance="outline" class="list-selector">
      <mat-label>Selected List</mat-label>
      <mat-select [value]="store.selectedListId()" (valueChange)="selectList($event)">
        @for (list of store.lists(); track list.id) {
          <mat-option [value]="list.id">
            <div class="list-option">
              <span>{{ list.name }}</span>
              @if (list.id === store.selectedListId() && list.ownerUid === store.user()?.uid) {
                <button mat-icon-button (click)="deleteList($event)" matTooltip="Delete list">
                  <mat-icon>delete_forever</mat-icon>
                </button>
              }
            </div>
          </mat-option>
        }
      </mat-select>
    </mat-form-field>
  }

  <!-- Create New List Form -->
  <div class="create-list-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>New list name</mat-label>
      <input matInput [ngModel]="store.newListText()" (ngModelChange)="store.setNewListText($event)" (keyup.enter)="store.addList()" [disabled]="store.isAddingList()" />
    </mat-form-field>
    <button mat-raised-button color="accent" (click)="store.addList()" [disabled]="store.isAddingList() || !store.newListText()">
      @if(store.isAddingList()) { <mat-spinner diameter="20"></mat-spinner> } @else { Create List }
    </button>
  </div>
</div>