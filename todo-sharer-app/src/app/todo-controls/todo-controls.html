<div class="controls-container">
  <mat-form-field appearance="outline" class="todo-search">
    <mat-label>Search To-Dos</mat-label>
    <input matInput [ngModel]="store.searchTerm()" (ngModelChange)="store.setSearchTerm($event)"  class="search-input" />
    @if (store.searchTerm()) {
      <button mat-icon-button matSuffix (click)="store.setSearchTerm('')">
        <mat-icon>close</mat-icon>
      </button>
    }
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <div class="action-buttons">
    <button mat-raised-button color="warn" (click)="store.clearCompleted()" [disabled]="!store.hasCompletedTodos()" matTooltip="Permanently delete all completed to-dos">
      <mat-icon>delete_sweep</mat-icon> Clear
    </button>

    <mat-button-toggle [checked]="store.hideCompleted()" (change)="store.setHideCompleted($event.source.checked)" matTooltip="Hide completed to-dos">
      @if (store.hideCompleted()) {
        <mat-icon>visibility</mat-icon>
      } @else {
        <mat-icon>visibility_off</mat-icon>
      }
    </mat-button-toggle>

    <mat-chip-listbox class="sort-controls" [value]="store.sortBy()" (change)="store.setSortBy($event.value)" aria-label="Sort by">
      <mat-chip-option value="order" tooltip="Sort by order">
        <mat-icon>drag_handle</mat-icon>
      </mat-chip-option>
      <mat-chip-option value="createdAt" tooltip="Sort by date added">
        <mat-icon>date_range</mat-icon>
      </mat-chip-option>
      <mat-chip-option value="dueDate" tooltip="Sort by due date">
        <mat-icon>event</mat-icon>
      </mat-chip-option>
    </mat-chip-listbox>
  </div>
</div>